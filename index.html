<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Azure Databricks Pricing Simulator Orange</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <div class="logo">O</div>
    <div>
      <h1>Azure Databricks Pricing Simulator Orange</h1>
      <p>DBU プラットフォーム費用の概算を正規化データから算出します。</p>
      <div class="pricing-meta" id="pricingMeta">
        <span class="badge" id="pricingVersion">version --</span>
        <span class="badge" id="pricingCurrency">currency --</span>
      </div>
    </div>
  </header>

  <main>
    <div id="bannerContainer"></div>

    <section class="card" aria-labelledby="calcTitle">
      <h2 id="calcTitle">見積条件</h2>

      <div class="form-row" style="margin-top:12px;">
        <div class="col">
          <label for="serviceSelect">サービス</label>
          <select id="serviceSelect"></select>
        </div>
        <div class="col">
          <label for="editionSelect">エディション</label>
          <select id="editionSelect"></select>
        </div>
        <div class="col">
          <label for="regionSelect">リージョン</label>
          <select id="regionSelect"></select>
        </div>
        <div class="col">
          <label for="serverlessSelect">Serverless</label>
          <select id="serverlessSelect"></select>
        </div>
      </div>

      <div class="form-row" style="margin-top:12px;">
        <div class="col">
          <label for="dbuInput">月間 DBU 消費量</label>
          <input id="dbuInput" type="number" min="0" step="1" value="1000" />
        </div>
        <div class="col">
          <label>選択中の DBU 単価</label>
          <div class="metric" id="selectedRate">-- USD/DBU</div>
        </div>
        <div class="col">
          <label>適用開始日</label>
          <div class="metric" id="effectiveDate">--</div>
        </div>
        <div class="col">
          <label>出典</label>
          <div class="metric" id="sourceLink">--</div>
        </div>
      </div>

      <div class="actions">
        <button id="calcBtn">料金を計算</button>
        <button id="resetBtn" class="secondary">リセット</button>
      </div>

      <div class="card" style="margin-top:14px;">
        <div class="result">
          <div>
            <div class="price" id="totalPrice">$0.00</div>
            <div class="breakdown" id="breakdownText">-- 内訳</div>
          </div>
        </div>
      </div>

      <p style="margin-top:12px;font-size:13px;color:var(--muted);">
        ※DBU は Databricks のプラットフォーム課金です。VM やストレージ等のインフラ費用は別途加算されます。
      </p>
    </section>

    <section class="card">
      <h2>計算式（DBU 部分）</h2>
      <p class="breakdown">
        $$Total = DBU\_rate \times DBU\_usage$$
      </p>
      <p class="breakdown" id="recordNotes"></p>
    </section>
  </main>

  <footer>
    出典と適用開始日は pricing.json に記載の一次情報を参照しています。
  </footer>

  <script type="module" src="main.js"></script>
</body>
</html>
